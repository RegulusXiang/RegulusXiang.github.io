<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>What we talk about when we talk about Hedging | 白马灰马 | by G. Xiang</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="keywords" content="Work">
  <meta name="description" content="After a 4-hour meeting with Joel, I finally understood the basic ideas about how the so called hedging works. Although I’m not going to do a data scientist’s work, however, in review of the automatic">
<meta property="og:type" content="article">
<meta property="og:title" content="What we talk about when we talk about Hedging">
<meta property="og:url" content="http://xianggen.info/2017/02/28/hedge/index.html">
<meta property="og:site_name" content="白马灰马">
<meta property="og:description" content="After a 4-hour meeting with Joel, I finally understood the basic ideas about how the so called hedging works. Although I’m not going to do a data scientist’s work, however, in review of the automatic">
<meta property="og:updated_time" content="2017-03-05T23:36:49.592Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="What we talk about when we talk about Hedging">
<meta name="twitter:description" content="After a 4-hour meeting with Joel, I finally understood the basic ideas about how the so called hedging works. Although I’m not going to do a data scientist’s work, however, in review of the automatic">
  
    <link rel="alternative" href="/atom.xml" title="白马灰马" type="application/atom+xml">
  
  <meta name="summary" content="&lt;p&gt;After a 4-hour meeting with Joel, I finally understood the basic ideas about how the so called hedging works. Although I’m not going to do a data scientist’s work, however, in review of the automatic trading platform I’m about to build, it’s supposed that I get a rough idea about the mechanisms of a hedge fund. So here are some of my memos. &lt;/p&gt;">
  <link rel="shortcut icon" href="/favicon.ico">
  <link href="/favicon.ico" rel="icon" type="image/x-ico">
  <link rel="stylesheet" href="/css/style.css"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="loading" class="active"></div>

  <nav id="menu" class="hide" >
   <div class="inner">
  <a href="javascript:;" class="header-icon waves-circle-light" id="menu-off">
      <i class="icon icon-lg icon-close"></i>
  </a>
  <div class="brand-wrap">
    <div class="brand">
      <a href="/" class="avatar"><img src="/img/poly.jpg"></a>
      <hgroup class="introduce">
        <h5 class="nickname">G. Xiang</h5>
        <a href="mailto:undefined" title="regulus.xiang@outlook.com" class="mail">regulus.xiang@outlook.com</a>
      </hgroup>
    </div>
  </div>
  <ul class="nav">
    
        <li class="waves-block">
          <a href="/"  >
            <i class="icon icon-lg icon-home"></i>
            主页
          </a>
        </li>
    
        <li class="waves-block">
          <a href="/archives"  >
            <i class="icon icon-lg icon-archives"></i>
            归档
          </a>
        </li>
    
        <li class="waves-block">
          <a href="/tags"  >
            <i class="icon icon-lg icon-tags"></i>
            关于
          </a>
        </li>
    
        <li class="waves-block">
          <a href="https://github.com/regulusxiang" target="_blank" >
            <i class="icon icon-lg icon-github"></i>
            Github
          </a>
        </li>
    
  </ul>

  <footer class="footer">
  <p><a rel="license" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0;vertical-align:middle;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAPCAMAAABEF7i9AAAAllBMVEUAAAD///+rsapERER3d3eIiIjMzMzu7u4iIiKUmZO6v7rKzsoODg4RERFVVVUNDQ0NDg0PEA8zMzNLTEtbXltmZmZydnF9gn2AgICPkI+ZmZmqqqq7u7vFxsXIzMgNDQwZGRkgICAhISEkJSMnKCcuMC4xMzE5Ozk7PTtBQkFCQkJDQ0Nna2eGhoaHh4ezuLLGysbd3d1wVGpAAAAA4UlEQVR42q2T1xqCMAyFk7QsBQeKA9x7j/d/OSm22CpX0nzcpA1/T05aAOuBVkMAScQFHLnEwoCo2f1TnQIGoVMewjZEjVFN4GH1Ue1Cn2jWqwfsOOj6wDwGvotsl/c8lv7KIq1eLOsT0HMFHMIE/RZyHnlphryT9zyV+8WH5e8yQw3wnQvgAFxPTKUVi555SHR/lOfLMgVTeDlSfN+TaoUsiTyeIm+bCkHvCA2FUKG48LDtYBZBknsYP/G8NTw0gaaHyuQf4H5pecrB/FYCT2sL9zAfy1Xyjou6L8X2W7YcLyBZCRtnq/zfAAAAAElFTkSuQmCC" /></a></p>
  <p>白马灰马 &copy; 2017</p>
  <p>Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme
  <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a></p>
  <a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-2x icon-rss-square"></i></a>
</footer>

</div>

  </nav>
  <main id="main">
    <header class="header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-circle-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">What we talk about when we talk about Hedging</div>
        
        <a href="javascript:;" class="header-icon waves-circle-light" id="menu-share">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header">
  <div class="container">
    <h1 class="author">What we talk about when we talk about Hedging</h1>
    <h5 class="subtitle">2017-02-28</h5>
  </div>
</header>

    <div class="container body-wrap">
      
  <article id="post-hedge" class="article article-type-post" itemprop="blogPost">
    
      <div class="post-meat flex-row">
        <div class="flex-col">
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Work/">Work</a></li></ul>
</div>
      </div>
      <div class="post-body">

        <aside class="post-widget" id="post-widget">

          
          <div class="post-share" id="post-share">
    <div class="tit">分享到：</div>
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" href="javascript:;" data-title="微博" data-service="tsina">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns" href="javascript:;" data-title="微信" data-service="weixin">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" href="javascript:;" data-title=" QQ" data-service="cqq">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" href="javascript:;" data-title=" Facebook" data-service="fb">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" href="javascript:;" data-title=" Twitter" data-service="twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="douban share-sns" href="javascript:;" data-title="豆瓣" data-service="douban">
          豆
        </a>
      </li>
    </ul>
 </div>

          

          
          <nav class="post-toc-wrap" id="post-toc">
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Short-amp-Long"><span class="post-toc-text">Short & Long</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#SPY-amp-Risk-Hedging"><span class="post-toc-text">SPY & Risk Hedging</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#My-Morning-Jobs"><span class="post-toc-text">My Morning Jobs</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Portfolio-rebalance-amp-3-day-trading"><span class="post-toc-text">Portfolio  rebalance & 3-day  trading</span></a></li></ol>
          </nav>
          
        </aside>

        <div class="post-main">

            <div class="post-content" id="post-content" itemprop="postContent"><p>After a 4-hour meeting with Joel, I finally understood the basic ideas about how the so called hedging works. Although I’m not going to do a data scientist’s work, however, in review of the automatic trading platform I’m about to build, it’s supposed that I get a rough idea about the mechanisms of a hedge fund. So here are some of my memos. </p>
<a id="more"></a>
<h2 id="Short-amp-Long"><a href="#Short-amp-Long" class="headerlink" title="Short &amp; Long"></a>Short &amp; Long</h2><p>Suppose that you are a very clever guy, how can you make a profit after knowing the stock of Apple(AAPL) is going to fall, say 5%, in the next 3 days? That’s about short.</p>
<p>The solution is easy. Suppose the price of AAPL is 100 dollars today and \$90 three days after. As a hedge fund, you can “borrow” 10 AAPL stocks today, which costs you \$1000. Then, you sell them, which results in a temporary 1000 dollars’ profit. After 3 days, you buy 10 AAPL stocks from the market using 900 dollars. And “return” this 10 stocks to whom you borrowed the stocks. All in all, you make a profit of \$100. </p>
<p>That’s called a “SHORT”. Using common sense, you can understand what is LONG, which is exact the opposite of SHORT.</p>
<h2 id="SPY-amp-Risk-Hedging"><a href="#SPY-amp-Risk-Hedging" class="headerlink" title="SPY &amp; Risk Hedging"></a>SPY &amp; Risk Hedging</h2><blockquote>
<p>To believe in something and not to live it, is dishonest. (Gandhi)</p>
</blockquote>
<p>We believe in the fact that there are three things serve as the main determining factors for the price of a stock:</p>
<ol>
<li>The performance and the set of subjective factors of the company, which is called $\alpha$;</li>
<li>The environment of the stock market;</li>
<li>The strength of association between the stock and the market, which is called $\beta$.</li>
</ol>
<p>Then, suppose P(x) represents the price of stock x, we can say:</p>
<p>$$P(x) = \beta*P(SPY) + \alpha$$</p>
<p>SPY(or SPDR-ETFs, Standard &amp; Poor’s depository receipt exchange trade funds) is a special stock: It can be considered as a fund who makes a profit by investing 500 different companies in US. Therefore, the price of its stock can be considered as a rough indicator for stock market.</p>
<p>For $\beta$, it reveals the relationship between the particular stock and the stock market. If $\beta &gt; 0$, we can say that they are positively related; otherwise, the correlation is negative. </p>
<p>For $\alpha$, it indicates the rise and fall of this particular stock. If $\alpha &lt; 0$, the price of stock is very likely to decrease, in this context, we should apply our “short” policy; otherwise, we buy “long”.</p>
<p>After believing this, we are going to use SPY to fulfill the Risk Hedging. First , we suppose</p>
<p>$$P(AAPL) = 2P(SPY)$$</p>
<p>​There is no $\alpha$ here, so let’s just buy in 100 Apple stock and in the mean time, sell 2<em>100 Spy stock. If the price of SPY is x per stock, then the price of AAPL is 2x. Because of (- 100\</em>2x) + (2*100 * x) = 0, we will neither win or lose. This is how hedging avoids the risk. So how can we make profits?</p>
<p>Then we suppose $$P(AAPL) = 2(SPY) - 5\%$$. We can see that $-5\% &lt; 0$, which tells us to “short” (sell) AAPL.  </p>
<table>
<thead>
<tr>
<th style="text-align:left">stock</th>
<th style="text-align:left">price</th>
<th style="text-align:left">amount</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">AAPL</td>
<td style="text-align:left">$\beta$ * x + $\alpha$</td>
<td style="text-align:left">100</td>
</tr>
<tr>
<td style="text-align:left">SPY</td>
<td style="text-align:left">x</td>
<td style="text-align:left">100 * $\beta$</td>
</tr>
</tbody>
</table>
<p>This is a use case when we know $\alpha$. The amount of apple stock we sell is 100. As a hedging operation, we buy in (100*$\beta$)SPY stocks. In this case, the profit we make is </p>
<p>$$-100<em>(\beta </em> x + \alpha) + 100 <em> \beta </em> x = -100 \alpha$$</p>
<p>From the cases above, we are able to have a general idea about how we use SPY in risk hedging.</p>
<h2 id="My-Morning-Jobs"><a href="#My-Morning-Jobs" class="headerlink" title="My Morning Jobs"></a>My Morning Jobs</h2><p>So what am I supposed to do? In the morning, I’ll receive a form(maybe excel from Bloomberg Terminal), something looks like:</p>
<table>
<thead>
<tr>
<th style="text-align:center">stock</th>
<th style="text-align:center">$\beta$</th>
<th style="text-align:center">suggestion</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">AAPL</td>
<td style="text-align:center">1.5</td>
<td style="text-align:center">short</td>
</tr>
<tr>
<td style="text-align:center">TSLA</td>
<td style="text-align:center">-2</td>
<td style="text-align:center">short</td>
</tr>
<tr>
<td style="text-align:center">MSFT</td>
<td style="text-align:center">3</td>
<td style="text-align:center">long</td>
</tr>
<tr>
<td style="text-align:center">GM</td>
<td style="text-align:center">1.4</td>
<td style="text-align:center">long</td>
</tr>
</tbody>
</table>
<p>Our CRO Bloch will tell me something like, today we have \$1000 to buy stocks, the total prices of each stock are equal. Of course we are going to buy SPY for hedging, so let your machine do the automatic trading work. </p>
<p>Take TSLA for an instance, the trading suggestion is “short”. So we are going to sell \$x of its stock. In the mean time, we have to buy $\beta*x = -2x$ dollars of SPY for hedging, which actually means we should sell $2x$ dollars of SPY. Then we can fill in the form:</p>
<table>
<thead>
<tr>
<th style="text-align:center">stock</th>
<th style="text-align:center">$\beta$</th>
<th style="text-align:center">suggestion</th>
<th style="text-align:center">SPY(+buy/-sell)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">AAPL</td>
<td style="text-align:center">1.5</td>
<td style="text-align:center">short</td>
<td style="text-align:center">+1.5x</td>
</tr>
<tr>
<td style="text-align:center">TSLA</td>
<td style="text-align:center">-2</td>
<td style="text-align:center">short</td>
<td style="text-align:center">-2x</td>
</tr>
<tr>
<td style="text-align:center">MSFT</td>
<td style="text-align:center">3</td>
<td style="text-align:center">long</td>
<td style="text-align:center">-3x</td>
</tr>
<tr>
<td style="text-align:center">GM</td>
<td style="text-align:center">1.4</td>
<td style="text-align:center">long</td>
<td style="text-align:center">-1.4x</td>
</tr>
</tbody>
</table>
<p>​In total, the amount of SPY we are going to buy/sell is $$1.5x - 2x - 3x - 1.4x = -4.9x$$. Because we have to buy \$x of each these 4 stocks. Our 1000 dollars this morning will be separated into $4.9 + 4 = 8.9$ parts. Therefore, we buy or sell (1/8.9 * 1000) dollars of AAPL/TSLA/MSFT/GM. And we sell (4.9/8.9 * 1000) dollars of SPY. </p>
<p>Using TWS (Trade Workstation) API, I can find out the VWAP or mkt price of each stock, then the trading platform I build will calculate the number of each stock to be operated and do the correspond buy/sell jobs. </p>
<h2 id="Portfolio-rebalance-amp-3-day-trading"><a href="#Portfolio-rebalance-amp-3-day-trading" class="headerlink" title="Portfolio  rebalance &amp; 3-day  trading"></a>Portfolio  rebalance &amp; 3-day  trading</h2><p>The further step is about how to apply the methods to calculate number of each stock to be traded on a regular 3-day-basis.</p>
<p>Because we are going to do the trading on a three-day basis, it’s natural to think of dividing the investment for one 3-day period into three equal parts and using each part to buy/sell stocks every day.</p>
<p>Nevertheless, there are occasions when we lose a lot of investment on the first day and therefore, we have to do correspond adjustment on the second and third day. For example, if we have \$999 in the beginning, the investment will be divided into three \$333 for each day. </p>
<p>Unfortunately, the first \$333 we used to buy AMZN in day 1 became only 1 dollar after the first day and before the opening of the second day. Suppose we have rebalance triggers which will be trigged say, when the fortune we have become less than 25% or more 140% of the initial investment that day, one trigger will be trigged on the second day for rebalance. </p>
<p>The so-called rebalance is: For now, the total investment is (1 + 666) dollars, what we want is to keep the share for the first-day investment be 1/3 of the total investment. Hence, we have to re-invest 667/3 dollars using the form in day-one to calculate how many stocks(same kind as in day-one) we are going to buy/sell in the second day. </p>
<p>After that, we will calculate the difference between the new result and the result in the first day. The result of the difference is what we should do on the second trading day. e.g.</p>
<table>
<thead>
<tr>
<th>day 1</th>
<th>new result</th>
<th>difference</th>
</tr>
</thead>
<tbody>
<tr>
<td>-1 AAPL</td>
<td>-3 AAPL</td>
<td>short 2 AAPL stocks</td>
</tr>
</tbody>
</table>
<p>Of course, the investment we have for the form from the second day becomes 667/3 dollars.</p>
</div>

            
<nav class="post-nav flex-row">
  <div class="flex-col waves-block prev">
    
  </div>
  <div class="flex-col waves-block next">
    
      <a href="/2016/11/12/Meanlingless/" title="Walk Through the Meanlingless" id="post-next" class="post-nav-link">
        <span class="article-nav-title">下一篇</span>
        <i class="icon icon-chevron-right"></i>
      </a>
    
  </div>

</nav>



            




        </div>

      </div>

    

  </article>



    </div>
  </main>
<div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-circle-light"><span class="icon icon-lg icon-chevron-up"></span></a>

<script>
var BLOG_SHARE = {
    title: "What we talk about when we talk about Hedging",
    pic: "/img/poly.jpg",
    summary: document.getElementsByName('summary')[0].content,
    url: "http://xianggen.info/2017/02/28/hedge/index.html"
};
</script>
<div class="global-share" id="global-share">
    <div class="tit">分享到：</div>
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" href="javascript:;" data-title="微博" data-service="tsina">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns" href="javascript:;" data-title="微信" data-service="weixin">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" href="javascript:;" data-title=" QQ" data-service="cqq">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" href="javascript:;" data-title=" Facebook" data-service="fb">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" href="javascript:;" data-title=" Twitter" data-service="twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="douban share-sns" href="javascript:;" data-title="豆瓣" data-service="douban">
          豆
        </a>
      </li>
    </ul>
 </div>



<script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>

<script src="/js/main.js"></script>


<! -- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->








</body>
</html>
